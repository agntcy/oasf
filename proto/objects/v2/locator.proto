// Copyright AGNTCY Contributors (https://github.com/agntcy)
// SPDX-License-Identifier: Apache-2.0

syntax = "proto3";

package objects.v2;

// Locator points to the artifact locators of a record.
// For example, this can include a reference to a helm chart.
//
// Specs: https://schema.oasf.agntcy.org/objects/locator
// Example: https://schema.oasf.agntcy.org/sample/objects/locator
message Locator {
  // Type of the locator.
  // Supports custom types.
  // Native types are defined in the LocatorType.
  string type = 1;

  // Location where the source can be found at.
  // Specs: https://datatracker.ietf.org/doc/html/rfc1738
  string url = 2;

  // Metadata associated with the locator.
  map<string, string> annotations = 3;

  // Size of the source in bytes pointed by the {url} property.
  optional uint64 size = 4;

  // Digest of the source pointed by the {url} property.
  // Specs: https://github.com/opencontainers/image-spec/blob/main/descriptor.md#digests
  optional string digest = 5;
}

// LocatorType defines placeholders for supported locators.
// Used in string format across APIs.
enum LocatorType {
  LOCATOR_TYPE_UNSPECIFIED = 0;     // ""
  LOCATOR_TYPE_HELM_CHART = 1;      // "helm_chart"
  LOCATOR_TYPE_DOCKER_IMAGE = 2;    // "docker_image"
  LOCATOR_TYPE_PYTHON_PACKAGE = 3;  // "python_package"
  LOCATOR_TYPE_SOURCE_CODE = 4;     // "source_code"
  LOCATOR_TYPE_BINARY = 5;          // "binary"
}
